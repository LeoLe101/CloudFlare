!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class r{constructor(e){this.variant=e}element(e){"title"===e.tagName&&e.setInnerContent(this.variant.title),"h1"===e.tagName&&e.setInnerContent(this.variant.h1),"p"===e.tagName&&e.setInnerContent(this.variant.description),"a"===e.tagName&&(e.setAttribute("href",this.variant.urlLink),e.setInnerContent(this.variant.urlTitle))}}const o=new Headers({method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Cache:"no-cache"},credentials:"include"}),a=[{title:"Leo Le's GitHub",h1:'"A journey of a thousand miles begins with a single step" - Lao Tzu',description:"Check out Leo's GitHub, then move forward",urlTitle:"Leo Le's GitHub",urlLink:"https://github.com/LeoLe101"},{title:"Leo Le's LinkedIn",h1:'"Know your intern more than he does himself" - Unknown',description:"Check out Leo's LinkedIn, then learn about him",urlTitle:"Leo Le's LinkedIn",urlLink:"https://www.linkedin.com/in/leole101/"}],i=400;function s(e){return e.slice(e.length-1)}addEventListener("fetch",e=>{switch(e.request.method){case"GET":e.respondWith(async function(e){return async function(e){var t,n,i,u,l,c=function(e){var t=null;0!=e.length&&(t=e.split(";").map(e=>e.split("=")).reduce((e,[t,n])=>({...e,[t.trim()]:decodeURIComponent(n)}),{}));return t}(e.headers.get("cookie"));try{var h=await fetch("https://cfw-takehome.developers.workers.dev/api/variants",o);h.ok&&(i=await h.json());var d=(w=i.variants,y=Math.floor(Math.random()*w.length),w[y]);c.hasOwnProperty("urlVariant")?(l=s(c.urlVariant),t=await fetch(c.urlVariant),n={headers:{"Content-Type":"text/html"}}):(l=s(d),t=await fetch(d),n={headers:{"Content-Type":"text/html","Set-Cookie":"urlVariant="+d}}),t.ok&&(u=await t.text());var p=new Response(u,n),f=a[l],m=new r(f),v=(new HTMLRewriter).on("title",m).on("h1#title",m).on("p#description",m).on("href",m).on("a",m).transform(p);return console.log("Parsed JSON",i),console.log("cookieValues",c),console.log("Variation",f),v}catch(e){return new Response(e.message||e.toString(),{status:404})}var w,y}(e)}(e.request));break;case"HEAD":case"POST":case"PUT":case"DELETE":case"PATCH":case"OPTIONS":default:e.respondWith(async function(){return new Response("HTTP request method not supported! Please use GET only...",{status:i})}())}})}]);